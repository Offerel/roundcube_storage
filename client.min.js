function save_one(){var part=rcmail.env.selected_attachment;rcmail.http_post("storage/save_one","_mbox="+urlencode(rcmail.env.mailbox)+"&_uid="+rcmail.env.uid+"&_part="+part)}function dmessage(response){alert(response.message)}function cform(){var storage_path=rcmail.env.spath,cid=location.search.split("id=")[1],specs="location=no,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,toolbar=no,width=840,height=370,",elwindow=window.open(storage_path+"elopen.html?id="+cid,"elopen",specs,!1)}function elcallback(files,cid,tid){for(id in files)rcmail.http_post("storage/elattach","_tid="+tid+"&_cid="+cid+"&_file="+files[id].path)}window.rcmail&&rcmail.addEventListener("init",(function(evt){var fbutton;rcmail.register_command("plugin.storage.save_one",save_one,!0),rcmail.addEventListener("beforemenu-open",(function(p){"attachmentmenu"==p.menu&&(rcmail.env.selected_attachment=p.id)})),$("#compose-attachments").contents().find(".button").after("<a class='button' tabindex='2' href='#' onclick='cform();'>"+rcmail.env.elbutton+"</a>"),$("#compose-attachments").contents().find("button").after("<button class='btn btn-secondary attach' tabindex='3' href='#' style='margin-left: 5px;' onclick='cform();'>"+rcmail.env.elbutton+"</button>")}));