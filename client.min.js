function save_one(){var e=rcmail.env.selected_attachment;rcmail.http_post("storage/save_one","_mbox="+urlencode(rcmail.env.mailbox)+"&_uid="+rcmail.env.uid+"&_part="+e)}function dmessage(e){alert(e.message)}function cform(){let e="location=no,menubar=no,resizable=no,scrollbars=no,status=no,titlebar=no,toolbar=no,width=840,height=370,";window.open("plugins/storage/elfinder/elopen.html?id="+location.search.split("id=")[1],"elopen",e,!1)}function elcallback(e,t,n){for(id in e)rcmail.http_post("storage/elattach","_tid="+n+"&_cid="+t+"&_file="+e[id].path)}window.rcmail&&rcmail.addEventListener("init",function(e){rcmail.register_command("plugin.storage.save_one",save_one,!0),rcmail.addEventListener("beforemenu-open",function(e){"attachmentmenu"==e.menu&&(rcmail.env.selected_attachment=e.id)});var t=$("#compose-attachments").contents().find(".button");t.after("<a class='button' tabindex='2' href='#' onclick='cform();'>"+rcmail.env.elbutton+"</a>"),$("#compose-attachments").contents().find("button").after("<button class='btn btn-secondary attach' tabindex='3' href='#' style='margin-left: 5px;' onclick='cform();'>"+rcmail.env.elbutton+"</button>")}),"serviceWorker"in navigator&&window.addEventListener("load",function(){navigator.serviceWorker.register("plugins/storage/sw.js").then(function(e){console.info("ServiceWorker registered")},function(e){console.error("ServiceWorker registration failed: ",e)})});